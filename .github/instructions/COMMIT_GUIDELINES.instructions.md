# 커밋 메시지 작성 지침 (Instructions)

## 필수 준수사항

### 1. 커밋 메시지 형식을 반드시 준수하세요

**형식:**
```
<type>(<scope>): <subject>

<body>

<footer>
```

**지침:**
- 모든 커밋은 위 형식을 정확히 따라야 합니다
- type과 subject는 필수, scope/body/footer는 선택사항입니다
- 각 섹션 사이에는 빈 줄을 넣어야 합니다
- **제목(subject)과 본문(body)은 반드시 한국어로 작성하세요**

## 타입 (Type)

| 타입 | 설명 |
|------|------|
| `feat` | 새로운 기능 추가 |
| `fix` | 버그 수정 |
| `docs` | 문서 수정 |
| `style` | 코드 포맷팅, 세미콜론 누락, 코드 변경이 없는 경우 |
| `refactor` | 코드 리팩토링 |
| `test` | 테스트 코드, 리팩토링 테스트 코드 추가 |
| `chore` | 빌드 업무 수정, 패키지 매니저 수정 |
| `perf` | 성능 개선 |
| `ci` | CI/CD 설정 변경 |
| `build` | 빌드 시스템 또는 외부 종속성에 영향을 주는 변경사항 |
| `revert` | 이전 커밋 되돌리기 |

## 스코프 (Scope)

프로젝트의 주요 영역을 나타냅니다:

- `auth` - 인증 관련
- `dashboard` - 대시보드 페이지
- `focus-session` - 집중 세션 기능
- `websocket` - WebSocket 통신
- `camera` - 카메라/웹캠 기능
- `gesture` - 제스처 인식
- `ui` - UI 컴포넌트
- `hooks` - 커스텀 훅
- `api` - API 관련
- `types` - 타입 정의
- `config` - 설정 파일
- `deps` - 의존성 관리

### 4. 제목 작성 규칙을 엄격히 준수하세요

**필수 규칙:**
1. **50자를 절대 초과하지 마세요**
2. **첫 글자는 반드시 소문자로 시작하세요**
3. **명령형(동사 원형)으로 작성하세요** - "추가한다" ❌, "추가" ⭕
4. **마침표(.)를 사용하지 마세요**
5. **반드시 한국어로 작성하세요** (영어 사용 금지)

**✅ 올바른 예시 (한국어):**
```
feat(focus-session): 집중 세션 시작 및 중지 기능 추가
fix(camera): 웹캠 권한 거부시 에러 처리 개선
refactor(hooks): 포커스 세션 훅 최적화
docs: 설치 방법을 README에 추가
chore(deps): 리액트 버전 업데이트
```

**❌ 잘못된 예시:**
```
Fix bug → fix: 로딩 버그 수정 (한국어로 구체적으로)
Added new feature. → feat: 새 기능 추가 (한국어, 마침표 제거)
feat: login feature → feat: 로그인 기능 추가 (한국어로)
feat: 새로운기능추가함 → feat: 새로운 기능 추가 (띄어쓰기, 과거형 수정)
FEAT(AUTH): 로그인 → feat(auth): 로그인 기능 추가 (대소문자 수정)
```

### 5. 본문 작성 시 이 규칙을 따르세요

**언제 본문을 작성해야 하는가:**
- 변경사항이 복잡하거나 여러 개일 때
- 왜 이 변경이 필요한지 설명이 필요할 때
- 변경으로 인한 영향을 명시해야 할 때

**본문 작성 규칙:**
1. **72자마다 줄을 바꾸세요**
2. **"무엇을"과 "왜" 변경했는지 설명하세요**
3. **"어떻게"보다는 "무엇"과 "왜"에 집중하세요**
4. **불릿 포인트(-)를 사용해 여러 변경사항을 나열하세요**
5. **반드시 한국어로 작성하세요**

**📝 본문 작성 템플릿 (한국어):**
```
<제목>

변경사항:
- 첫 번째 변경사항
- 두 번째 변경사항  
- 세 번째 변경사항

변경 이유:
기존에는 [문제점]이 있었습니다.
이를 해결하기 위해 [해결책]을 적용했습니다.

기대 효과:
- 성능 개선 효과
- 사용성 향상 효과
```

**✅ 올바른 본문 예시:**
```
feat(websocket): 실시간 제스처 데이터 전송 기능 구현

변경사항:
- 웹소켓 연결을 통한 실시간 제스처 데이터 전송
- 프레임 레이트 조절 가능 (기본값: 10fps)
- 연결 실패시 자동 재연결 로직 추가
- JPEG 품질 설정 옵션 제공

변경 이유:
이전에는 HTTP 요청으로 제스처 데이터를 전송했지만,
실시간성이 떨어져 사용자 경험이 좋지 않았습니다.
웹소켓을 사용하여 지연시간을 크게 줄일 수 있었습니다.
```

### 6. 푸터 작성 지침

**언제 푸터를 사용해야 하는가:**
- Breaking changes가 있을 때 (반드시 명시)
- GitHub 이슈를 참조하거나 닫을 때
- 특별한 주의사항이 있을 때

**Breaking Changes 작성법 (한국어):**
```
BREAKING CHANGE: 

기존 API가 변경되었습니다. 
[구체적인 변경 내용과 마이그레이션 방법을 한국어로 설명]
```

**이슈 참조 방법:**
- `Closes #123` - 이슈를 닫을 때
- `Fixes #456` - 버그 이슈를 수정했을 때  
- `Refs #789` - 관련 이슈를 참조할 때

**✅ 올바른 푸터 예시 (한국어):**
```
BREAKING CHANGE: 

기존 REST API 엔드포인트 /api/gesture가 제거되었습니다.
대신 웹소켓 연결(/ws/gesture)을 사용해야 합니다.

마이그레이션 가이드: docs/migration.md 참조

Closes #123
Fixes #456
```

### 상황별 커밋 메시지 작성법 (한국어)

**🔧 기능 추가 시:**
```
feat(dashboard): 실시간 집중도 게이지 추가

변경사항:
- CircularGauge 컴포넌트로 실시간 집중도 표시
- 점수에 따른 색상 변경 (빨강/노랑/초록)
- 부드러운 애니메이션 효과 적용

변경 이유:
사용자가 현재 집중 상태를 직관적으로 파악할 수 있도록
시각적 피드백을 제공하기 위함입니다.

Closes #45
```

**🐛 버그 수정 시:**
```
fix(camera): 카메라 권한 거부 후 재요청시 무한 로딩 문제 해결

문제 상황:
카메라 권한을 거부한 후 다시 시도할 때 isLoading 상태가
올바르게 업데이트되지 않아 무한 로딩 상태가 되는 문제

해결 방법:
- 권한 요청 실패시 로딩 상태를 false로 변경
- 에러 상태 초기화 로직 추가
- 권한 재요청 플로우 개선

Fixes #67
```

**♻️ 리팩토링 시:**
```
refactor(hooks): 포커스 세션 제스처 훅 분리 및 최적화

변경사항:
기존의 복잡한 상태 관리 로직을 여러 개의 작은 훅으로 분리
- useMediaStream: 미디어 스트림 관리
- useGestureRecognition: 제스처 인식 로직  
- useWebSocket: 웹소켓 연결 관리

개선 효과:
- 코드 가독성 향상
- 재사용성 증가
- 테스트 용이성 개선
- 유지보수성 향상
```
## 커밋하기 전 체크리스트

**✅ 커밋 전 반드시 확인하세요:**

1. **[ ] 커밋 메시지 형식이 올바른가?**
   - `<type>(<scope>): <subject>` 형식 준수
   - 50자 이내 제목
   - 소문자 시작, 마침표 없음

2. **[ ] 한국어로 작성했는가?**
   - 제목과 본문 모두 한국어 사용
   - 영어 단어 사용 금지 (기술 용어 제외)
   - 자연스러운 한국어 표현 사용

3. **[ ] 적절한 타입을 선택했는가?**
   - 정의된 11개 타입 중 하나 사용
   - 변경사항과 타입이 일치

4. **[ ] 한 커밋에 하나의 논리적 변경사항만 포함되어 있는가?**
   - 여러 기능/수정사항은 분리
   - 관련 없는 변경사항 제거

5. **[ ] 테스트가 통과하는가?**
   - 빌드 오류 없음
   - 기존 기능 동작 확인

6. **[ ] 커밋 메시지가 명확한가?**
   - 다른 개발자가 이해할 수 있는 내용
   - 변경 이유가 필요하면 본문에 한국어로 작성
## 금지사항 및 처벌 규정

### ❌ 절대 하지 말아야 할 것들

1. **영어 커밋 메시지 사용 금지**
   ```
   ❌ Add login feature
   ❌ Fix camera bug  
   ❌ Update README
   ❌ Refactor hooks
   ⭕ feat(auth): 로그인 기능 추가
   ⭕ fix(camera): 카메라 버그 수정
   ⭕ docs: README 업데이트
   ⭕ refactor(hooks): 훅 리팩토링
   ```

2. **임시 커밋 메시지 사용 금지**
   ```
   ❌ WIP
   ❌ temp
   ❌ 임시
   ❌ test
   ❌ 수정
   ❌ fix
   ```

3. **의미 없는 커밋 메시지 금지**
   ```
   ❌ 업데이트
   ❌ 코드 수정
   ❌ 기능 추가
   ❌ 버그 수정
   ```

4. **여러 변경사항을 하나의 커밋에 포함 금지**
   - 기능 추가 + 버그 수정을 한 커밋에 ❌
   - 서로 다른 영역의 변경사항을 한 커밋에 ❌

5. **커밋 없이 대용량 변경사항 푸시 금지**
   - 한 번에 너무 많은 파일 변경 ❌
   - 의미 있는 단위로 커밋 분리 필요 ⭕

### ⚠️ 위반 시 조치사항

1. **1차 위반**: 커밋 메시지 한국어로 수정 요청
2. **2차 위반**: 커밋 히스토리 정리 후 재푸시
3. **3차 위반**: 코드 리뷰 시 추가 검토
4. **지속적 위반**: 팀 미팅에서 논의

## 자동화 도구 설정 지침

### 1단계: commitlint 설치 및 설정

**설치:**
```bash
npm install --save-dev @commitlint/config-conventional @commitlint/cli
```

**설정 파일 생성 (commitlint.config.js):**
```javascript
module.exports = {
  extends: ['@commitlint/config-conventional'],
  rules: {
    'type-enum': [2, 'always', [
      'feat', 'fix', 'docs', 'style', 'refactor', 
      'test', 'chore', 'perf', 'ci', 'build', 'revert'
    ]],
    'scope-enum': [2, 'always', [
      'auth', 'dashboard', 'focus-session', 'websocket', 
      'camera', 'gesture', 'ui', 'hooks', 'api', 
      'types', 'config', 'deps'
    ]],
    'subject-max-length': [2, 'always', 50],
    'subject-case': [2, 'always', 'lower-case'],
    // 한국어 사용 강제 (영어 감지시 에러)
    'subject-full-stop': [2, 'never', '.'],
    'body-leading-blank': [2, 'always'],
    'footer-leading-blank': [2, 'always']
  }
}
```

### 2단계: husky 설정

**설치:**
```bash
npm install --save-dev husky
npx husky install
```

**commit-msg 훅 추가:**
```bash
npx husky add .husky/commit-msg 'npx --no-install commitlint --edit "$1"'
```

### 3단계: VS Code 확장 설치

**권장 확장:**
- Conventional Commits
- Git Lens
- Git Graph
- Korean Language Pack

### 4단계: 팀 규칙 적용

**package.json에 스크립트 추가:**
```json
{
  "scripts": {
    "commit": "git-cz",
    "lint:commit": "commitlint --from=HEAD~1"
  }
}
```

## 마무리

이 지침을 준수하여 **한국어로** 일관성 있고 의미 있는 커밋 히스토리를 유지하세요.

**📞 문의사항:**
- 가이드라인 관련 질문: 팀 리드에게 문의
- 도구 설정 문제: DevOps 팀에게 문의
- 새로운 타입/스코프 제안: 팀 회의에서 논의

**📝 가이드라인 업데이트:**
- 이 문서는 프로젝트 진행에 따라 업데이트될 수 있습니다
- 변경사항은 팀 전체에 공지됩니다
- **모든 커밋 메시지는 반드시 한국어로 작성해야 합니다**
